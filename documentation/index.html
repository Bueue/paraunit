<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="generator" content="Hugo 0.16" />

  <title>Documentation &middot; Paraunit</title>

  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/pure-min.css">

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-min.css">
  <!--<![endif]-->

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="http://facile-it.github.io/paraunit/css/side-menu-old-ie.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="http://facile-it.github.io/paraunit/css/side-menu.css">
  <!--<![endif]-->

  <link rel="stylesheet" href="http://facile-it.github.io/paraunit/css/blackburn.css">

  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

  
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" type="text/css">

  
  <link rel="alternate" type="application/rss+xml" title="Paraunit" href="http://facile-it.github.io/paraunit/index.xml" />

  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.1.0/styles/androidstudio.min.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.1.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  

  <link rel="shortcut icon" href="http://facile-it.github.io/paraunit/img/favicon.ico" type="image/x-icon" />

</head>


<body>
<div id="layout">

  
<a href="#menu" id="menuLink" class="menu-link">
  
  <span></span>
</a>
<div id="menu">

  
  <a class="pure-menu-heading brand" href="http://facile-it.github.io/paraunit/">Paraunit</a>


  <div class="pure-menu">
    <ul class="pure-menu-list">
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="http://facile-it.github.io/paraunit/"><i class='fa fa-home fa-fw'></i>Home</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="http://facile-it.github.io/paraunit/tags/release"><i class='fa fa-tags fa-fw'></i>Releases</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="http://facile-it.github.io/paraunit/documentation/"><i class='fa fa-book fa-fw'></i>Documentation</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://github.com/facile-it/paraunit/issues"><i class='fa fa-bug fa-fw'></i>Issue tracker</a>
      
        </li>
      
    </ul>
  </div>

  <div class="pure-menu social">
  <ul class="pure-menu-list">

    <li class="pure-menu-item">
      <a class="pure-menu-link" href="http://facile-it.github.io/paraunit/index.xml"><i class="fa fa-rss fa-fw"></i>RSS</a>
    </li>

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://github.com/facile-it/paraunit" target="_blank"><i class="fa fa-github fa-fw"></i>GitHub</a>
    </li>
    

    

    

  </ul>
</div>


  <div class="pure-g">
  <div class="small-print pure-u-1 pure-u-md-1-1">
    <small></small>
  </div>
  <div class="small-print pure-u-1 pure-u-md-1-1">
    <small>Built with&nbsp;<a href="https://gohugo.io/" target="_blank">Hugo</a></small>
    <small>Theme&nbsp;<a href="https://github.com/yoshiharuyamashita/blackburn" target="_blank">Blackburn</a></small>
  </div>
</div>

</div>


  <div id="main">


<div class="header">
  <h1>Documentation</h1>
  <h2></h2>
</div>
<div class="content">
  
  <div id="toc" class="well col-md-4 col-sm-6">
    <nav id="TableOfContents">
<ul>
<li><a href="#requirements">Requirements</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#usage">Usage</a>
<ul>
<li><a href="#run-command"><code>run</code> command</a></li>
<li><a href="#coverage-command"><code>coverage</code> command</a></li>
<li><a href="#optional-parameters">Optional parameters</a>
<ul>
<li><a href="#configuration">Configuration</a></li>
<li><a href="#parallel">Parallel</a></li>
<li><a href="#testsuite">Testsuite</a></li>
<li><a href="#phpunit-inherited-options">PHPUnit inherited options</a></li>
<li><a href="#debug-mode">Debug mode</a></li>
</ul></li>
</ul></li>
<li><a href="#parsing-results">Parsing results</a></li>
<li><a href="#troubleshooting">Troubleshooting</a></li>
</ul>
</nav>
  </div>
  

  

<p>Paraunit is a tool for faster executions of PHPUnit test suites.
It makes this possible by launching multiple test in parallel with single PHPUnit processes.</p>

<p>Paraunit is developed using <a href="http://symfony.com/components">Symfony components</a>.</p>

<h1 id="requirements">Requirements</h1>

<p>Paraunit is used in conjunction with PHPUnit. It reads PHPUnit&rsquo;s .xml configuration file, so it&rsquo;s needed to know which test to load.</p>

<p>If you are testing a Symfony+Doctrine application, it&rsquo;s suggested to use also <a href="https://github.com/facile-it/paraunit-testcase">facile-it/paraunit-testcase</a>, to avoid database concurrency problems during functional testing;
also, if your want to run functional tests, remember to <strong>warm up the cache before</strong>, in order to avoid a mass cache miss (and relative <a href="https://en.wikipedia.org/wiki/Cache_stampede">cache stampede</a>) with concurrency problems, and subsequent random failures.</p>

<h1 id="installation">Installation</h1>

<p>To use this package, use <a href="https://getcomposer.org/">composer</a>:</p>

<ul>
<li>from CLI: <code>composer require --dev facile-it/paraunit</code></li>
<li>or, directly in your <code>composer.json</code>:</li>
</ul>

<pre><code>{
    &quot;require-dev&quot;: {
        &quot;facile-it/paraunit&quot;: &quot;~0.7&quot;
    }
}
</code></pre>

<h1 id="usage">Usage</h1>

<h2 id="run-command"><code>run</code> command</h2>

<p>The <code>run</code> command is the main functionality of Paraunit; it launches all the tests in all your configured testsuites in parallel; you can run it like this: (assuming your composer&rsquo;s bin dir is <code>vendor/bin</code>)</p>

<pre><code class="language-bash">vendor/bin/paraunit run
</code></pre>

<p>This is possible because Paraunit starts as a Symfony console command, and itâ€™s provided through a bin launcher.</p>

<h2 id="coverage-command"><code>coverage</code> command</h2>

<p>The <code>coverage</code> command is used to generate the test coverage in parallel. It supports all the same options of the <code>run</code> command (documented below) but it requires <strong>at least one of those three options</strong> to choose the coverage output format:</p>

<ul>
<li><code>--html=dir</code> generates the coverage in HTML format, inside the specified directory</li>
<li><code>--clover=filename.xml</code> generates the coverage in XML-clover format, with the specified filename</li>
<li><code>--xml=filename.xml</code> generates the coverage in PHPUnit XML format, with the specified filename</li>
</ul>

<pre><code class="language-bash">vendor/bin/paraunit coverage --html=./coverage
</code></pre>

<p>Paraunit detects automatically if the <a href="http://phpdbg.com/">PHPDBG</a> binary is available, at it uses that as a preferred coverage driver, since it&rsquo;s a lot faster and uses less memory. If it&rsquo;s not available, it falls back to use xDebug. If you have PHPDBG, you are highly encouraged to disable xDebug, since Paraunit can&rsquo;t do it on its own, and using PHPDBG with xDebug enabled can lead to an excessive memory consumption, up to the point of crashing your machine.</p>

<h2 id="optional-parameters">Optional parameters</h2>

<h3 id="configuration">Configuration</h3>

<p>If your <code>phpunit.xml.dist</code> file is not in the default base dir, you can specify it by:</p>

<pre><code class="language-bash">vendor/bin/paraunit run --configuration=relPath/to/phpunit.xml.dist
</code></pre>

<p>or with the short version:</p>

<pre><code class="language-bash">vendor/bin/paraunit run -c=relPath/to/phpunit.xml.dist
</code></pre>

<p>Also it&rsquo;s possible to provide only a directory, in such case Paraunit will look a file with the default name, <code>phpunit.xml.dist</code>:</p>

<pre><code class="language-bash">vendor/bin/paraunit run -c=relPath/to/xml/file/
</code></pre>

<h3 id="parallel">Parallel</h3>

<p>You can choose how many concurrent processes you want to spawn at the same time, using the <code>--parallel</code> option. The default value is <code>10</code>:</p>

<pre><code class="language-bash">vendor/bin/paraunit run --parallel=5
</code></pre>

<h3 id="testsuite">Testsuite</h3>

<p>You can run a single test suite (as defined in your configuration file) using:</p>

<pre><code class="language-bash">vendor/bin/paraunit run --testsuite=testSuiteName
</code></pre>

<h3 id="phpunit-inherited-options">PHPUnit inherited options</h3>

<p>A large number of PHPUnit options (apart from the aforementioned <code>--testsuite</code>) are compatible with Paraunit, and they will be passed along to each single PHPUnit spawned process. For a more complete documentation of those options&rsquo; behavior, see the <a href="https://phpunit.de/manual/current/en/textui.html#textui.clioptions">PHPUnit CLI documentation</a>.</p>

<p>This is the complete list of supported options:</p>

<ul>
<li><code>filter</code></li>
<li><code>group</code></li>
<li><code>exclude-group</code></li>
<li><code>test-suffix</code></li>
<li><code>report-useless-tests</code></li>
<li><code>strict-global-state</code></li>
<li><code>disallow-test-output</code></li>
<li><code>enforce-time-limit</code></li>
<li><code>disallow-todo-tests</code></li>
<li><code>process-isolation</code></li>
<li><code>no-globals-backup</code></li>
<li><code>static-backup</code></li>
<li><code>loader</code></li>
<li><code>repeat</code></li>
<li><code>printer</code></li>
<li><code>bootstrap</code></li>
<li><code>no-configuration</code></li>
<li><code>include-path</code></li>
</ul>

<h3 id="debug-mode">Debug mode</h3>

<p>If you have problem running the tests, or the execution stops before the results are printed out, you can launch Paraunit in debug mode, with:</p>

<pre><code class="language-bash">vendor/bin/paraunit run --debug
</code></pre>

<p>It will show a verbose output with the full running test queue.</p>

<h1 id="parsing-results">Parsing results</h1>

<p>Paraunit prints a parsed result from the single PHPUnit processes. This parsing is done using PHPUnit&rsquo;s JSON log output, so it&rsquo;s a resilient and reliable process; it allows to be also resistent to fatal errors and other abnormal process termination.</p>

<p>Anyhow, Paraunit doesn&rsquo;t rely on the parsed results to provide the final exit code; instead, it looks only to the processes&rsquo; exit codes:
 <strong>it will return a clean zero exit code only if all the PHPUnit processes gave it a zero exit code</strong>.
 So you can safely use it in your CI build ;)</p>

<p>Side note: if you are using <a href="http://symfony.com/doc/current/components/phpunit_bridge.html">Symfony&rsquo;s PHPUnit bridge</a> to spot deprecations (or any other plugin that outputs something) you will notice that the bridge list of deprecations will be lost through Paraunit; the tests will be shown as passing, but <strong>the Paraunit process will still fail as expected if a deprecation is encountered</strong>, due to the aforementioned exit code being considered.</p>

<h1 id="troubleshooting">Troubleshooting</h1>

<p>If you are experiencing any problems, you can try the <code>--debug</code> option to identify the problematic test, and try running it alone; if failures seems to appear at randoms during Paraunit runs, check for concurrency problem, like database access; otherwise, please open an issue <a href="https://github.com/facile-it/paraunit/issues">here on GitHub</a>.</p>

</div>

</div>
</div>
<script src="http://facile-it.github.io/paraunit/js/ui.js"></script>




</body>
</html>

